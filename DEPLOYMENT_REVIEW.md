# GitHubæ¨é€è¦†ç›–éƒ¨ç½²å®¡æŸ¥æŠ¥å‘Š

> é‡æ–°éƒ¨ç½²å‰çš„é£é™©è¯„ä¼°å’Œé—®é¢˜æ¸…å•

**å®¡æŸ¥æ—¥æœŸ**: 2026-02-06  
**å®¡æŸ¥äºº**: AI Assistant  
**éƒ¨ç½²æ–¹å¼**: GitHubæ¨é€è¦†ç›–  
**å½“å‰çŠ¶æ€**: å·²éƒ¨ç½²é¡¹ç›® â†’ é‡æ–°éƒ¨ç½²

---

## ğŸ¯ æ‰§è¡Œæ‘˜è¦

### æ€»ä½“è¯„ä¼°: ğŸŸ¡ å¯éƒ¨ç½²ï¼Œä½†éœ€è¦åˆ†é˜¶æ®µæ‰§è¡Œ

**é£é™©ç­‰çº§**: ä¸­ç­‰  
**ä¸»è¦é£é™©**: æ•°æ®åº“è¿ç§»æœªæ‰§è¡Œã€æ¨¡å‹ä»£ç ä¸æ•°æ®åº“ä¸åŒ¹é…  
**å»ºè®®ç­–ç•¥**: **è“ç»¿éƒ¨ç½²** æˆ– **åˆ†é˜¶æ®µéƒ¨ç½²**

---

## ğŸ“Š å˜æ›´ç»Ÿè®¡

| ç±»åˆ« | æ•°é‡ | å½±å“ç­‰çº§ |
|------|------|----------|
| **åˆ é™¤æ–‡æ¡£** | 23ä¸ª | ğŸŸ¢ ä½é£é™© |
| **ä¿®æ”¹æ–‡ä»¶** | 8ä¸ª | ğŸŸ¡ ä¸­é£é™© |
| **æ–°å¢æ–‡ä»¶** | 7ä¸ª | ğŸŸ¡ ä¸­é£é™© |
| **Pythonä»£ç è¡Œ** | +1200è¡Œ | ğŸŸ¡ ä¸­é£é™© |
| **æ•°æ®åº“æ¨¡å‹** | 4ä¸ªæ–°è¡¨ | ğŸ”´ é«˜é£é™© |
| **APIç«¯ç‚¹** | 7ä¸ªæ–°ç«¯ç‚¹ | ğŸŸ¢ ä½é£é™© |

---

## ğŸ”´ é«˜é£é™©é—®é¢˜ï¼ˆå¿…é¡»è§£å†³ï¼‰

### é—®é¢˜1: æ•°æ®åº“è¿ç§»æœªæ‰§è¡Œ ğŸ”´ğŸ”´ğŸ”´

**é£é™©æè¿°**:
- æ–°å¢äº†4ä¸ªæ•°æ®åº“è¡¨æ¨¡å‹
- ä»£ç ä¸­å¼•ç”¨äº†è¿™äº›è¡¨
- å¦‚æœç›´æ¥æ¨é€ï¼Œåº”ç”¨å¯åŠ¨æ—¶ä¼šå´©æºƒ

**æ¶‰åŠçš„æ–°è¡¨**:
1. `gsc_api_usage` - GSC APIä½¿ç”¨è®°å½•
2. `gsc_quota_status` - GSCé…é¢çŠ¶æ€
3. `indexing_status` - é¡µé¢ç´¢å¼•çŠ¶æ€
4. `content_actions` - å†…å®¹å˜æ›´å†å²

**åæœ**:
```
éƒ¨ç½²ååº”ç”¨å¯åŠ¨å¤±è´¥
æŠ¥é”™: sqlalchemy.exc.NoSuchTableError: gsc_api_usage
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ–¹æ¡ˆA: éƒ¨ç½²å‰æ‰§è¡Œè¿ç§»ï¼ˆæ¨èï¼‰
1. æ¨é€ä»£ç å‰ï¼Œå…ˆåœ¨ç°æœ‰ç¯å¢ƒæ‰§è¡Œ:
   python -m alembic revision -m "add_improvements"
   # ç¼–è¾‘è¿ç§»æ–‡ä»¶
   python -m alembic upgrade head

2. ç„¶åå†æ¨é€ä»£ç 

# æ–¹æ¡ˆB: åˆ†é˜¶æ®µéƒ¨ç½²
é˜¶æ®µ1: æ¨é€ä¸å«æ–°æ¨¡å‹å¼•ç”¨çš„ä»£ç 
é˜¶æ®µ2: æ‰§è¡Œæ•°æ®åº“è¿ç§»
é˜¶æ®µ3: æ¨é€å®Œæ•´ä»£ç 
```

---

### é—®é¢˜2: å‘åå…¼å®¹æ€§é—®é¢˜ ğŸŸ¡

**é£é™©æè¿°**:
éƒ¨åˆ†ä¿®æ”¹å¯èƒ½å½±å“ç°æœ‰åŠŸèƒ½

**æ£€æŸ¥æ¸…å•**:
- âœ… APIç«¯ç‚¹éƒ½æ˜¯æ–°å¢ï¼Œä¸å½±å“ç°æœ‰æ¥å£
- âœ… æ¨¡å‹ä¿®æ”¹æ˜¯æ·»åŠ å­—æ®µï¼Œä¸å½±å“ç°æœ‰æŸ¥è¯¢
- âš ï¸ å®šæ—¶ä»»åŠ¡æ–°å¢ï¼Œå¯èƒ½å½±å“è°ƒåº¦å™¨
- âš ï¸ æœåŠ¡å±‚å¯¼å…¥æ–°æ¨¡å‹ï¼Œå¦‚æœæ¨¡å‹ä¸å­˜åœ¨ä¼šå´©æºƒ

**å»ºè®®**:
1. åœ¨æµ‹è¯•ç¯å¢ƒå…ˆéªŒè¯
2. å‡†å¤‡å›æ»šæ–¹æ¡ˆ

---

## ğŸŸ¡ ä¸­é£é™©é—®é¢˜

### é—®é¢˜3: ç¯å¢ƒå˜é‡é…ç½® ğŸ”´

**æ–°å¢é…ç½®é¡¹**:
```bash
# IndexNowé…ç½®ï¼ˆå¯é€‰ä½†æ¨èï¼‰
INDEXNOW_API_KEY=your_api_key_here

# GSCé…é¢ç›‘æ§éœ€è¦ç¡®è®¤ç°æœ‰é…ç½®å®Œæ•´:
GSC_SITE_URL=https://example.com
GSC_AUTH_METHOD=service_account
GSC_CREDENTIALS_JSON={...}
```

**æ£€æŸ¥æ–¹å¼**:
```bash
# æ£€æŸ¥å½“å‰ç¯å¢ƒå˜é‡
echo $INDEXNOW_API_KEY
echo $GSC_SITE_URL
```

**å½±å“**:
- å¦‚æœIndexNowæœªé…ç½®ï¼Œè‡ªåŠ¨ç´¢å¼•æ£€æŸ¥åŠŸèƒ½ä¼šè·³è¿‡
- GSCé…ç½®ä¸å®Œæ•´ä¼šå¯¼è‡´é…é¢ç›‘æ§æ— æ³•å·¥ä½œ

---

### é—®é¢˜4: ä¾èµ–åŒ…æ£€æŸ¥ ğŸŸ¡

**å½“å‰ä¾èµ–çŠ¶æ€**:
- âœ… requirements.txt æœªä¿®æ”¹
- âœ… æ²¡æœ‰æ–°å¢ä¾èµ–åŒ…
- âœ… æ‰€æœ‰å¯¼å…¥ä½¿ç”¨ç°æœ‰åŒ…

**æ£€æŸ¥å‘½ä»¤**:
```bash
pip install -r requirements.txt --dry-run
```

---

## ğŸŸ¢ ä½é£é™©å˜æ›´

### æ–‡æ¡£æ¸…ç†ï¼ˆ23ä¸ªåˆ é™¤ï¼‰âœ…

**åˆ é™¤çš„æ–‡ä»¶**:
- BUG_TRACKING.md
- UPGRADE_ROADMAP.md
- å„ç§ *SUMMARY*.md
- docs/ ç›®å½•ä¸‹çš„P0-P3å‡çº§æ–‡æ¡£

**å½±å“**:
- ğŸŸ¢ æ— è¿è¡Œæ—¶å½±å“
- ğŸŸ¢ ä»…å‡å°‘ä»“åº“å¤§å°
- âš ï¸ å¦‚æœæœ‰è„šæœ¬ä¾èµ–è¿™äº›æ–‡æ¡£ä¼šå¤±è´¥

---

### APIç«¯ç‚¹æ–°å¢ï¼ˆ7ä¸ªï¼‰âœ…

**æ–°å¢ç«¯ç‚¹**:
```
GET  /api/v1/gsc/quota
GET  /api/v1/gsc/quota/history
GET  /api/v1/indexing/status
GET  /api/v1/indexing/pages/attention
POST /api/v1/indexing/check/{post_id}
POST /api/v1/indexing/check-all
```

**å½±å“**:
- ğŸŸ¢ ä¸å½±å“ç°æœ‰ç«¯ç‚¹
- ğŸŸ¢ å¯é€‰ä½¿ç”¨
- âš ï¸ éœ€è¦æ•°æ®åº“è¡¨æ‰èƒ½æ­£å¸¸å·¥ä½œ

---

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### é¢„éƒ¨ç½²æ£€æŸ¥

- [ ] **æ•°æ®åº“å¤‡ä»½**: å·²åˆ›å»ºç”Ÿäº§æ•°æ®åº“å¤‡ä»½
- [ ] **è¿ç§»è„šæœ¬**: Alembicè¿ç§»è„šæœ¬å·²å‡†å¤‡
- [ ] **ç¯å¢ƒå˜é‡**: æ£€æŸ¥INDEXNOW_API_KEYå’ŒGSCé…ç½®
- [ ] **æµ‹è¯•ç¯å¢ƒ**: å·²åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯
- [ ] **å›æ»šè®¡åˆ’**: å‡†å¤‡å¥½å›æ»šæ–¹æ¡ˆ

### éƒ¨ç½²æ­¥éª¤

#### é˜¶æ®µ1: å‡†å¤‡ï¼ˆéƒ¨ç½²å‰1å¤©ï¼‰
```bash
# 1. å¤‡ä»½æ•°æ®åº“
pg_dump $DATABASE_URL > backup_$(date +%Y%m%d).sql

# 2. æ£€æŸ¥ç¯å¢ƒå˜é‡
cat .env | grep -E "(INDEXNOW|GSC)"

# 3. ç”Ÿæˆè¿ç§»è„šæœ¬
python -m alembic revision -m "add_gsc_usage_and_indexing"
# ç¼–è¾‘è¿ç§»æ–‡ä»¶ï¼Œæ·»åŠ 4ä¸ªæ–°è¡¨
```

#### é˜¶æ®µ2: æ•°æ®åº“è¿ç§»ï¼ˆéƒ¨ç½²å½“å¤©ï¼‰
```bash
# 1. æ‰§è¡Œè¿ç§»
python -m alembic upgrade head

# 2. éªŒè¯è¡¨åˆ›å»º
psql $DATABASE_URL -c "\dt"
# åº”çœ‹åˆ°: gsc_api_usage, gsc_quota_status, indexing_status, content_actions
```

#### é˜¶æ®µ3: ä»£ç éƒ¨ç½²
```bash
# 1. GitHubæ¨é€
# åœ¨GitHubä¸Šåˆ›å»ºPull Request
# å®¡æŸ¥å˜æ›´
# åˆå¹¶åˆ°mainåˆ†æ”¯

# 2. æˆ–è€…æ‰‹åŠ¨éƒ¨ç½²
git pull origin main

# 3. é‡å¯æœåŠ¡
# Docker: docker-compose restart app
# PM2: pm2 restart app
# Systemd: sudo systemctl restart seo-autopilot
```

#### é˜¶æ®µ4: éªŒè¯ï¼ˆéƒ¨ç½²åï¼‰
```bash
# 1. æ£€æŸ¥åº”ç”¨å¯åŠ¨
curl http://localhost:8080/health

# 2. æµ‹è¯•æ–°API
curl http://localhost:8080/api/v1/gsc/quota

# 3. æ£€æŸ¥æ—¥å¿—
tail -f logs/app.log
```

---

## âš ï¸ å…³é”®é£é™©ç‚¹

### 1. æ•°æ®åº“è¿ç§»å¤±è´¥
**å¯èƒ½æ€§**: ä¸­  
**å½±å“**: é«˜  
**ç¼“è§£æªæ–½**:
- å…ˆåœ¨æµ‹è¯•ç¯å¢ƒæ‰§è¡Œè¿ç§»
- å‡†å¤‡å›æ»šè„šæœ¬
- ç»´æŠ¤çª—å£æœŸéƒ¨ç½²

### 2. æ¨¡å‹ä»£ç ä¸æ•°æ®åº“ä¸åŒ¹é…
**å¯èƒ½æ€§**: é«˜ï¼ˆå¦‚æœä¸æ‰§è¡Œè¿ç§»ï¼‰  
**å½±å“**: æé«˜  
**ç—‡çŠ¶**:
```python
# åº”ç”¨å¯åŠ¨æŠ¥é”™
sqlalchemy.exc.NoSuchTableError: gsc_api_usage
# æˆ–
sqlalchemy.exc.ProgrammingError: column does not exist
```

### 3. å®šæ—¶ä»»åŠ¡å†²çª
**å¯èƒ½æ€§**: ä½  
**å½±å“**: ä¸­  
**æ³¨æ„**: æ–°å¢çš„å®šæ—¶ä»»åŠ¡å¯èƒ½ä¸ç°æœ‰ä»»åŠ¡å†²çª

---

## ğŸš€ æ¨èéƒ¨ç½²ç­–ç•¥

### ç­–ç•¥A: è“ç»¿éƒ¨ç½²ï¼ˆæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰

```
å½“å‰ç¯å¢ƒï¼ˆè“è‰²ï¼‰
    â†“
éƒ¨ç½²æ–°ç¯å¢ƒï¼ˆç»¿è‰²ï¼‰+ æ‰§è¡Œæ•°æ®åº“è¿ç§»
    â†“
æµ‹è¯•ç»¿è‰²ç¯å¢ƒ
    â†“
åˆ‡æ¢æµé‡åˆ°ç»¿è‰²ç¯å¢ƒ
    â†“
ä¿ç•™è“è‰²ç¯å¢ƒï¼ˆç”¨äºå›æ»šï¼‰
```

**ä¼˜ç‚¹**:
- é›¶åœæœºæ—¶é—´
- å¿«é€Ÿå›æ»š
- é£é™©æœ€å°

**ç¼ºç‚¹**:
- éœ€è¦åŒå€èµ„æº
- å¤æ‚åº¦è¾ƒé«˜

---

### ç­–ç•¥B: ç»´æŠ¤çª—å£éƒ¨ç½²ï¼ˆé€‚åˆå°è§„æ¨¡ï¼‰

```
1. é€šçŸ¥ç”¨æˆ·ç»´æŠ¤æ—¶é—´ï¼ˆå»ºè®®å‡Œæ™¨2-4ç‚¹ï¼‰
2. åœæ­¢åº”ç”¨æœåŠ¡
3. å¤‡ä»½æ•°æ®åº“
4. æ‰§è¡Œæ•°æ®åº“è¿ç§»
5. æ¨é€ä»£ç 
6. å¯åŠ¨åº”ç”¨
7. éªŒè¯åŠŸèƒ½
8. æ¢å¤æœåŠ¡
```

**é¢„è®¡åœæœºæ—¶é—´**: 5-10åˆ†é’Ÿ

---

### ç­–ç•¥C: åˆ†é˜¶æ®µéƒ¨ç½²ï¼ˆå½“å‰æ¨èï¼‰

**é˜¶æ®µ1: ä»…æ¨¡å‹ï¼ˆç«‹å³æ‰§è¡Œï¼‰**
```bash
# åªæ¨é€æ¨¡å‹æ–‡ä»¶å’Œè¿ç§»è„šæœ¬
git add src/models/gsc_data.py
 git add src/models/indexing_status.py
 git add alembic/versions/xxx_add_improvements.py
 git commit -m "Add new database models"
 git push origin main

# åœ¨æœåŠ¡å™¨æ‰§è¡Œè¿ç§»
python -m alembic upgrade head
```

**é˜¶æ®µ2: æœåŠ¡å’ŒAPIï¼ˆç¬¬äºŒå¤©ï¼‰**
```bash
# æ¨é€æœåŠ¡å±‚å’ŒAPI
git add src/services/
git add src/api/
git commit -m "Add GSC usage tracking and index monitoring services"
git push origin main
```

**é˜¶æ®µ3: é›†æˆï¼ˆç¬¬ä¸‰å¤©ï¼‰**
```bash
# æ¨é€é›†æˆä»£ç 
git add src/scheduler/
git add src/pseo/
git commit -m "Integrate usage tracking and index monitoring"
git push origin main
```

**ä¼˜ç‚¹**:
- é£é™©åˆ†æ•£
- æ¯ä¸ªé˜¶æ®µå¯éªŒè¯
- æ˜“äºå›æ»š

---

## ğŸ§ª æµ‹è¯•éªŒè¯æ¸…å•

éƒ¨ç½²åå¿…é¡»éªŒè¯:

### APIæµ‹è¯•
```bash
# 1. GSCé…é¢API
curl -H "Authorization: Bearer TOKEN" \
  http://localhost:8080/api/v1/gsc/quota

# æœŸæœ›è¿”å›: {"current": {...}, "history": [...], "breakdown_by_type": {...}}

# 2. ç´¢å¼•çŠ¶æ€API
curl -H "Authorization: Bearer TOKEN" \
  http://localhost:8080/api/v1/indexing/status

# æœŸæœ›è¿”å›: {"total_pages": 0, "indexed": 0, "index_rate": 0, ...}
```

### æ•°æ®åº“æµ‹è¯•
```bash
# æ£€æŸ¥è¡¨æ˜¯å¦å­˜åœ¨
psql $DATABASE_URL -c "SELECT COUNT(*) FROM gsc_api_usage;"
psql $DATABASE_URL -c "SELECT COUNT(*) FROM indexing_status;"
```

### æ—¥å¿—æ£€æŸ¥
```bash
# æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯
tail -100 logs/app.log | grep -i error

# æ£€æŸ¥å®šæ—¶ä»»åŠ¡æ³¨å†Œ
tail -50 logs/app.log | grep -i "index_status_check"
```

---

## ğŸ”„ å›æ»šæ–¹æ¡ˆ

### å¦‚æœéƒ¨ç½²å¤±è´¥

**æ­¥éª¤1: åœæ­¢åº”ç”¨**
```bash
# Docker
docker-compose stop app

# PM2
pm2 stop seo-autopilot

# Systemd
sudo systemctl stop seo-autopilot
```

**æ­¥éª¤2: å›æ»šä»£ç **
```bash
# å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
git log --oneline -5
git reset --hard HEAD~1  # æˆ–å…¶ä»–æäº¤ID
git push origin main --force
```

**æ­¥éª¤3: æ•°æ®åº“å›æ»šï¼ˆå¦‚æœéœ€è¦ï¼‰**
```bash
# æ¢å¤å¤‡ä»½
psql $DATABASE_URL < backup_20240206.sql

# æˆ–å›æ»šè¿ç§»
python -m alembic downgrade -1
```

**æ­¥éª¤4: é‡å¯åº”ç”¨**
```bash
docker-compose up -d
# æˆ–
pm2 start seo-autopilot
```

---

## ğŸ“ ç´§æ€¥è”ç³»

å¦‚æœéƒ¨ç½²å‡ºç°é—®é¢˜:
1. ç«‹å³åœæ­¢åº”ç”¨
2. æ¢å¤æ•°æ®åº“å¤‡ä»½
3. å›æ»šä»£ç 
4. è”ç³»å¼€å‘å›¢é˜Ÿ

---

## âœ… æœ€ç»ˆå»ºè®®

### é€‚ç”¨äºé‡æ–°éƒ¨ç½²ï¼Ÿ
**ç­”æ¡ˆ**: âœ… **å¯ä»¥ï¼Œä½†å¿…é¡»åˆ†é˜¶æ®µæ‰§è¡Œ**

### å…³é”®è¦æ±‚:
1. **å¿…é¡»å…ˆæ‰§è¡Œæ•°æ®åº“è¿ç§»**ï¼ˆğŸ”´ æœ€é‡è¦ï¼‰
2. å»ºè®®åœ¨ç»´æŠ¤çª—å£æœŸéƒ¨ç½²
3. å‡†å¤‡å¥½å›æ»šæ–¹æ¡ˆ
4. å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯

### æ¨èéƒ¨ç½²é¡ºåº:
```
Day 1: æ•°æ®åº“è¿ç§»ï¼ˆä¸åœæœºï¼‰
Day 2: æ¨é€ä»£ç ï¼ˆé‡å¯åº”ç”¨ï¼‰
Day 3: éªŒè¯å’Œç›‘æ§
```

### ä¸é€‚åˆç«‹å³éƒ¨ç½²çš„æƒ…å†µ:
- âŒ æ²¡æœ‰æ•°æ®åº“å¤‡ä»½
- âŒ æ— æ³•åœæœºç»´æŠ¤
- âŒ æ²¡æœ‰æµ‹è¯•ç¯å¢ƒéªŒè¯
- âŒ ç¼ºå°‘ç¯å¢ƒå˜é‡é…ç½®

---

**å®¡æŸ¥ç»“è®º**: æ”¹è¿›æ–¹æ¡ˆé€‚åˆé‡æ–°éƒ¨ç½²ï¼Œä½†éœ€è¦ä¸¥æ ¼æŒ‰ç…§æ£€æŸ¥æ¸…å•æ‰§è¡Œï¼Œç‰¹åˆ«æ˜¯æ•°æ®åº“è¿ç§»æ­¥éª¤ã€‚

**å»ºè®®è¡ŒåŠ¨**: é‡‡ç”¨"ç­–ç•¥C: åˆ†é˜¶æ®µéƒ¨ç½²"ï¼Œå…ˆæ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼Œå†æ¨é€ä»£ç ã€‚
